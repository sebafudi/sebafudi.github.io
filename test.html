<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comprehensive Quiz App</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .question {
        margin-bottom: 20px;
      }
      .options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      button {
        padding: 10px;
        cursor: pointer;
      }
      .feedback {
        margin-top: 10px;
        font-weight: bold;
      }
      .correct {
        color: green;
      }
      .incorrect {
        color: red;
      }
      #score {
        position: fixed;
        top: 10px;
        right: 10px;
        background-color: #f0f0f0;
        padding: 10px;
        border-radius: 5px;
      }
      textarea {
        width: 100%;
        height: 100px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div id="score">
      Score: <span id="correct-count">0</span>/<span id="total-count">0</span>
    </div>
    <div id="quiz-container"></div>
    <button id="next-btn" style="display: none">Next Question</button>

    <script>
      const quizData = {
        questions: [
          {
            type: 'multiple',
            question:
              'Jakie ryzyko może wynikać z niewłaściwego filtrowania danych wejściowych w aplikacji?',
            correct_answer: 'SQL Injection',
            incorrect_answers: [
              'Utrata dostępu do bazy danych',
              'Brak funkcji filtrowania',
              'Zwiększona responsywność aplikacji',
            ],
          },
          {
            type: 'multiple',
            question:
              'Który mechanizm najlepiej chroni przed atakami typu XSS?',
            correct_answer: 'Kodowanie danych wyjściowych',
            incorrect_answers: [
              'Instalacja firewalla',
              'Wprowadzenie limitu czasu sesji',
              'Używanie przestarzałych algorytmów szyfrowania',
            ],
          },
          {
            type: 'multiple',
            question: 'Czym charakteryzuje się walidacja danych wejściowych?',
            correct_answer:
              'Sprawdzaniem zgodności danych z oczekiwanym formatem lub typem',
            incorrect_answers: [
              'Usuwaniem białych znaków z ciągów tekstowych',
              'Zmianą kodowania danych na UTF-8',
              'Tworzeniem kopii zapasowych bazy danych',
            ],
          },
          {
            type: 'multiple',
            question:
              'Które z poniższych działań najlepiej zapobiega wstrzyknięciom SQL?',
            correct_answer: 'Stosowanie sparametryzowanych zapytań SQL',
            incorrect_answers: [
              'Kodowanie danych w UTF-8',
              'Filtrowanie tylko niektórych danych wejściowych',
              'Unikanie używania baz danych w aplikacji',
            ],
          },
          {
            type: 'multiple',
            question:
              'Które z poniższych narzędzi pomaga w testowaniu aplikacji pod kątem podatności na niewłaściwe filtrowanie danych wejściowych?',
            correct_answer: 'Burp Suite',
            incorrect_answers: ['Jenkins', 'Postman', 'Google Analytics'],
          },
          {
            type: 'multiple',
            question: 'Co oznacza sanityzacja danych w kontekście filtrowania?',
            correct_answer:
              'Usuwanie lub przekształcanie danych wejściowych w celu zapewnienia ich bezpieczeństwa',
            incorrect_answers: [
              'Tworzenie bardziej przejrzystego interfejsu użytkownika',
              'Wyłączanie pól formularzy niedostępnych dla użytkownika',
              'Przyspieszenie zapytań SQL poprzez użycie indeksów',
            ],
          },
          {
            type: 'open',
            question:
              'Na czym polega walidacja danych wejściowych i dlaczego jest kluczowa w aplikacjach webowych?',
          },
          {
            type: 'open',
            question:
              'Jakie są konsekwencje braku filtrowania danych w aplikacjach webowych?',
          },
          {
            type: 'open',
            question: 'Czym różni się walidacja od sanityzacji danych?',
          },
          {
            type: 'open',
            question:
              'Dlaczego filtrowanie danych jest ważne z punktu widzenia bezpieczeństwa aplikacji webowych?',
          },
          {
            type: 'open',
            question:
              'Jakie podstawowe zasady należy stosować, aby chronić swoją skrzynkę pocztową przed spamem? Podaj 3 zasady',
          },
          {
            type: 'open',
            question: 'Wymień 3 narzędzia antyspamowe jakie znasz.',
          },
          {
            type: 'open',
            question:
              'Czym jest czarna lista w kontekście ochrony przed spamem?',
          },
          {
            type: 'open',
            question:
              'Czym jest biała lista w kontekście ochrony przed spamem?',
          },
          {
            type: 'open',
            question: 'Wymień 3 zagrożenia jakie niesie spam.',
          },
          {
            type: 'multiple',
            question:
              'Które z poniższych rozwiązań jest najczęściej używane do ochrony przed spamem?',
            correct_answer: 'Filtry antyspamowe',
            incorrect_answers: [
              'Blokowanie plików cookies',
              'Wyłączanie Wi-Fi',
              'Zmiana przeglądarki',
            ],
          },
          {
            type: 'multiple',
            question: "Co oznacza termin 'spam'?",
            correct_answer: 'Niechciane i masowe wiadomości',
            incorrect_answers: [
              'Legalne wiadomości reklamowe',
              'Prywatne wiadomości od znajomych',
              'Szyfrowane e-maile biznesowe',
            ],
          },
          {
            type: 'multiple',
            question:
              'Która z poniższych metod NIE jest skuteczna w walce ze spamem?',
            correct_answer:
              'Udostępnianie swojego e-maila na forach publicznych',
            incorrect_answers: [
              'Używanie filtrów antyspamowych',
              'Regularne aktualizowanie oprogramowania',
              'Unikanie otwierania podejrzanych załączników',
            ],
          },
          {
            type: 'multiple',
            question: 'Z poniżej wymienionych spamem są:',
            correct_answer: 'Niechciane wiadomości',
            incorrect_answers: ['Ataki DDOS', 'Firewall', 'DNS spoofing'],
          },
          {
            type: 'multiple',
            question:
              'Które z poniższych oznacza typowy znak wiadomości phishingowej (spamu)?',
            correct_answer: 'Błędne adresy e-mail i podejrzane linki',
            incorrect_answers: [
              'Profesjonalne logo firmy',
              'Wykorzystanie języka formalnego',
              'Brak jakichkolwiek załączników',
            ],
          },
          {
            type: 'open',
            question: 'Co oznacza skrót SSL?',
          },
          {
            type: 'open',
            question: 'Kto stworzył pierwszą wersję protokołu SSL?',
          },
          {
            type: 'open',
            question: 'Jakie dwie główne funkcje bezpieczeństwa oferuje SSL?',
          },
          {
            type: 'open',
            question:
              'W którym roku wprowadzono pierwszą wersję protokołu SSL?',
          },
          {
            type: 'open',
            question:
              'W jaki sposób można sprawdzić, czy strona korzysta z SSL?',
          },
          {
            type: 'multiple',
            question:
              'Jakiego rodzaju certyfikat jest używany w protokole Secure Sockets Layer (SSL)?',
            correct_answer: 'Certyfikat SSL',
            incorrect_answers: [
              'Certyfikat kulinarny',
              'Certyfikat sportowy',
              'Certyfikat Netscape Communications Corporation',
            ],
          },
          {
            type: 'multiple',
            question: 'Co chroni protokół Secure Sockets Layer (SSL)?',
            correct_answer: 'Komunikację online',
            incorrect_answers: [
              'Szyfrowane kable elektryczne',
              'Proces pieczenia chleba',
              'Uwierzetelnione budynki mieszkalne',
            ],
          },
          {
            type: 'multiple',
            question:
              'Który port jest standardowo używany przez protokół Secure Sockets Layer (SSL)?',
            correct_answer: 'Port 443',
            incorrect_answers: ['Port 12345', 'Port HDMI', 'Port 1995'],
          },
          {
            type: 'multiple',
            question:
              'Jakie dane są szyfrowane za pomocą Secure Sockets Layer (SSL)?',
            correct_answer: 'Dane przesyłane przez sieć',
            incorrect_answers: [
              'Dane zapisane na lodówce',
              'Dane meteorologiczne',
              'Dane z książki kucharskiej',
            ],
          },
          {
            type: 'multiple',
            question:
              'Jaki symbol w przeglądarce wskazuje na użycie Secure Sockets Layer (SSL)?',
            correct_answer: 'Kłódka',
            incorrect_answers: ['Kwiatek', 'Kwadrat', 'Obrazek kota'],
          },
          {
            type: 'open',
            question: 'Czym jest OWASP Top 10?',
          },
          {
            type: 'open',
            question: 'Co zapewnia OWASP MAS (Mobile Application Security)?',
          },
          {
            type: 'open',
            question: 'Opisz w dwóch zdaniach czym jest OWASP Juice Shop:',
          },
          {
            type: 'open',
            question: 'Wymień co najmniej dwa ryzyka projektowe:',
          },
          {
            type: 'open',
            question:
              'Aplikacja jest podatna na ataki typu wstrzyknięcia kiedy… Wymień co najmniej 2 przykłady:',
          },
          {
            type: 'multiple',
            question:
              'Które zagadnienie z poniższych NIE należy do OWASP Top Ten?',
            correct_answer: 'Blockchain Exploits',
            incorrect_answers: [
              'SQL Injection',
              'Cross-Site Scripting (XSS)',
              'Broken Access Control',
            ],
          },
          {
            type: 'multiple',
            question:
              'Które stwierdzenie dotyczące ryzyka projektowego jest niepoprawne:',
            correct_answer: 'Ryzyko projektowe można całkowicie wyeliminować.',
            incorrect_answers: [
              'Problemy techniczne, organizacyjne i związane z dostawcami to przykłady ryzyk projektowych.',
              'Ryzyko projektowe może być minimalizowane poprzez regularną analizę i ocenę potencjalnych zagrożeń.',
              'Planowanie działań łagodzących ryzyko jest kluczowe dla zwiększenia szans na sukces projektu.',
            ],
          },
          {
            type: 'multiple',
            question: 'Które z poniższych produktów nie jest projektem OWASP',
            correct_answer: 'Splunk',
            incorrect_answers: [
              'JuiceShop',
              'Dependency Track',
              'OWASP Top Ten',
            ],
          },
          {
            type: 'multiple',
            question: 'Wybierz z poniższych ryzyko projektowe:',
            correct_answer: 'problemy natury politycznej',
            incorrect_answers: [
              'błędy w kodzie struktury sterowania pętlą',
              'niewykonywanie zakładanych funkcji oprogramowania zgodnie z potrzebami',
              'niepoprawne wykonywanie konkretnych obliczeń w niektórych okolicznościach',
            ],
          },
          {
            type: 'multiple',
            question: 'Co oznacza skrót OWASP?',
            correct_answer: 'Open Worldwide Application Security Project',
            incorrect_answers: [
              'Open Web Application Security Program',
              'Online Web Application System Protocol',
              'Open Worldwide Application Security Plan',
            ],
          },
          {
            type: 'open',
            question: 'Czym są skrypty cross-site?',
          },
          {
            type: 'open',
            question: 'Czym jest HTML injection?',
          },
          {
            type: 'multiple',
            question:
              'Co to jest luka w zabezpieczeniach Cross-Site Scripting (XSS)?',
            correct_answer:
              'Wstrzyknięcie kodu, który jest wykonywany po stronie przeglądarki użytkownika.',
            incorrect_answers: [
              'Błąd umożliwiający przekierowanie użytkownika na złośliwą stronę.',
              'Luka umożliwiająca wyciek danych uwierzytelniających.',
              'Mechanizm kontroli dostępu między domenami.',
            ],
          },
          {
            type: 'true_false',
            question:
              'Luka XSSI umożliwia atakującemu wykradanie wrażliwych danych poprzez wykorzystanie JavaScriptu po stronie klienta do odczytu poufnych informacji z uwierzytelnionych sesji.',
            correct_answer: 'True',
          },
          {
            type: 'true_false',
            question:
              'Magazyn lokalny, pamięć sesji, IndexedDB, Web SQL (przestarzałe), pliki cookie to mechanizmy przechowywania danych udostępniane deweloperom przez przeglądarki do przechowywania danych po stronie klienta.',
            correct_answer: 'True',
          },
          {
            type: 'true_false',
            question:
              'Clickjacking to złośliwa technika, w której użytkownik sieci jest oszukiwany w celu interakcji (w większości przypadków poprzez kliknięcie) z czymś innym niż to, z czym użytkownik uważa, że wchodzi w interakcję.',
            correct_answer: 'True',
          },
          {
            type: 'multiple',
            question:
              'Który mechanizm umożliwia komunikację między różnymi domenami w bezpieczny sposób?',
            correct_answer: 'Cross Document Messaging',
            incorrect_answers: ['WebSockets', 'Clickjacking', 'IndexedDB'],
          },
          {
            type: 'open',
            question: 'Jakie są podstawowe zasady działania mechanizmu CORS?',
          },
          {
            type: 'open',
            question: 'Co to jest luka CSS injection?',
          },
          {
            type: 'open',
            question: 'Czym jest manipulacja zasobami po stronie klienta?',
          },
          {
            type: 'open',
            question:
              'Jakie mechanizmy filtrowania danych powinny być zastosowane w aplikacjach webowych, aby zapobiegać atakom typu SQL Injection i XSS?',
          },
          {
            type: 'open',
            question:
              "Co to jest 'clickjacking'? Podaj definicję (i przykład).",
          },
          {
            type: 'open',
            question: 'Jak można zapobiec SQL Injection (wstrzyknięcie SQL)?',
          },
          {
            type: 'open',
            question:
              'Jakie są podstawowe mechanizmy zapobiegania atakom typu XSS (Cross-Site Scripting) w aplikacjach internetowych?',
          },
          {
            type: 'multiple',
            question: 'Czym są testy penetracyjne:',
            correct_answer: 'Testy bezpieczeństwa',
            incorrect_answers: [
              'Testy ciążowe',
              'Testy na ojcostwo',
              'Testy obciążeniowe',
            ],
          },
          {
            type: 'open',
            question: 'Jak zabezpieczyć się przed zdalnym wykonywaniem kodu?',
          },
          {
            type: 'open',
            question:
              'Na czym polega Encja zewnętrzna XML (ang. XLM External Entity)?',
          },
          {
            type: 'multiple',
            question: 'Co to jest wstrzyknięcie SQL (SQL Injection)?',
            correct_answer:
              'Wykonanie nieautoryzowanych poleceń w bazie danych.',
            incorrect_answers: [
              'Zainstalowanie wirusa na serwerze.',
              'Zmiana haseł użytkowników.',
              'Przechwycenie danych w sieci.',
            ],
          },
          {
            type: 'multiple',
            question:
              'Co najlepiej opisuje sytuację wyścigu (ang. race condition)?',
            correct_answer:
              'Gdy kolejność wykonania współbieżnych sekcji kodu jest nieprzewidywalna, co prowadzi do błędów.',
            incorrect_answers: [
              'Gdy dwie sekcje kodu są wykonywane w kolejności z góry ustalonej przez programistę.',
              'Gdy dwie sekcje kodu działają zawsze poprawnie bez względu na ich kolejność wykonania.',
              'Gdy wszystkie wątki są zsynchronizowane i korzystają z tych samych zasobów w określonym czasie.',
            ],
          },
          {
            type: 'multiple',
            question:
              'Single Sign-On (SSO) - mechanizm wielokrotnego logowania, zaznacz które z wymienionych nie jest metodą jego implementacji:',
            correct_answer: 'Logme-in',
            incorrect_answers: [
              'SAML',
              'OAuth',
              'Współdzielenie plików cookie',
            ],
          },
          {
            type: 'multiple',
            question:
              'Która z poniższych metod nie należy do standardowych mechanizmów 2FA?',
            correct_answer: 'Weryfikacja za pomocą CAPTCHA',
            incorrect_answers: [
              'Kod generowany przez aplikację uwierzytelniającą',
              'Klucz sprzętowy (np. YubiKey)',
              'Kod SMS wysyłany na telefon',
            ],
          },
        ],
      };

      let currentQuestionIndex =
        parseInt(localStorage.getItem('currentQuestionIndex')) || 0;
      let correctCount = parseInt(localStorage.getItem('correctCount')) || 0;
      let totalCount = parseInt(localStorage.getItem('totalCount')) || 0;
      const quizContainer = document.getElementById('quiz-container');
      const nextButton = document.getElementById('next-btn');
      const scoreElement = document.getElementById('score');
      const correctCountElement = document.getElementById('correct-count');
      const totalCountElement = document.getElementById('total-count');
      const answerMap = new Map(
        JSON.parse(localStorage.getItem('answerMap')) || []
      );

      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function displayQuestion() {
        if (currentQuestionIndex >= quizData.questions.length) {
          showSummary();
          return;
        }

        const question = quizData.questions[currentQuestionIndex];
        let questionHTML = `
            <div class="question">
              <h2>${question.question}</h2>
          `;

        if (question.type === 'multiple') {
          const allAnswers = [
            question.correct_answer,
            ...question.incorrect_answers,
          ];
          const shuffledAnswers = shuffleArray(allAnswers);
          questionHTML += `
              <div class="options">
                ${shuffledAnswers
                  .map(
                    (answer) => `
                  <button onclick="checkAnswer('${answer}')">${answer}</button>
                `
                  )
                  .join('')}
              </div>
            `;
        } else if (question.type === 'true_false') {
          questionHTML += `
              <div class="options">
                <button onclick="checkAnswer('True')">True</button>
                <button onclick="checkAnswer('False')">False</button>
              </div>
            `;
        } else if (question.type === 'open') {
          questionHTML += `
              <textarea id="open-answer"></textarea><br>
              <button onclick="submitOpenAnswer()">Submit</button>
            `;
        }

        questionHTML += `
            <div class="feedback"></div>
          </div>
          `;

        quizContainer.innerHTML = questionHTML;
        nextButton.style.display = 'none';
        updateScore();
      }

      function checkAnswer(selectedAnswer) {
        const question = quizData.questions[currentQuestionIndex];
        const feedbackElement = document.querySelector('.feedback');
        const buttons = document.querySelectorAll('.options button');

        buttons.forEach((button) => (button.disabled = true));

        if (selectedAnswer === question.correct_answer) {
          feedbackElement.textContent = 'Correct!';
          feedbackElement.className = 'feedback correct';
          correctCount++;
          answerMap.set(currentQuestionIndex, true);
        } else {
          feedbackElement.textContent = `Incorrect. The correct answer is: ${question.correct_answer}`;
          feedbackElement.className = 'feedback incorrect';
          answerMap.set(currentQuestionIndex, false);
        }

        totalCount++;
        updateScore();
        nextButton.style.display = 'block';
        saveProgress();
      }

      function submitOpenAnswer() {
        const answer = document.getElementById('open-answer').value;
        answerMap.set(currentQuestionIndex, answer);
        nextButton.style.display = 'block';
        saveProgress();
      }

      function updateScore() {
        correctCountElement.textContent = correctCount;
        totalCountElement.textContent = totalCount;
      }

      function showSummary() {
        let summaryHTML = '<h2>Quiz Summary</h2>';
        summaryHTML += `<p>Final Score: ${correctCount}/${totalCount}</p>`;
        summaryHTML += '<h3>Questions:</h3>';

        quizData.questions.forEach((question, index) => {
          const answer = answerMap.get(index);
          summaryHTML += `
              <p>
                <strong>Q${index + 1}:</strong> ${question.question}<br>
            `;

          if (question.type === 'open') {
            summaryHTML += `<strong>Your Answer:</strong> ${answer}`;
          } else {
            summaryHTML += `
                <span class="${answer === true ? 'correct' : 'incorrect'}">
                  ${answer === true ? 'Correct' : 'Incorrect'}
                </span><br>
                <strong>Correct Answer:</strong> ${question.correct_answer}
              `;
          }

          summaryHTML += `</p>`;
        });

        quizContainer.innerHTML = summaryHTML;
        nextButton.style.display = 'none';
        scoreElement.style.display = 'none';
        resetProgress();
      }

      function saveProgress() {
        localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
        localStorage.setItem('correctCount', correctCount);
        localStorage.setItem('totalCount', totalCount);
        localStorage.setItem('answerMap', JSON.stringify([...answerMap]));
      }

      function resetProgress() {
        localStorage.removeItem('currentQuestionIndex');
        localStorage.removeItem('correctCount');
        localStorage.removeItem('totalCount');
        localStorage.removeItem('answerMap');
      }

      nextButton.addEventListener('click', () => {
        currentQuestionIndex++;
        saveProgress();
        if (currentQuestionIndex < quizData.questions.length) {
          displayQuestion();
        } else {
          showSummary();
        }
      });

      displayQuestion();
    </script>
  </body>
</html>
